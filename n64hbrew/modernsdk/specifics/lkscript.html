<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="../styles.css" type="text/css" media="all" />
<title>Modern SDK: Linkerscripts</title>

<div class='header'><h1>Modern SDK: Linkerscripts</h1></div>
</head>
<body>
<h3>Preface</h3>

<p>
    "Linking" involves putting the different data (code, assets) that goes into your program together into a ROM. <br>
    In the Modern SDK linking is done by passing a linkerscript to <code>ld</code>, and the output ELF file being converted to a ROM binary by <code>objcopy</code>.<br>
</p>
<h3>Introduction</h3>
<p>
    Here is an excerpt of onetri's linkerscript.
<pre>
OUTPUT_ARCH (mips)
SECTIONS
{
   __romPos = 0;
   _bootSegmentStart = ADDR(.boot); _bootSegmentRomStart = __romPos; .boot 0x04000000 : AT(__romPos)
   {
      asm/rom_header.o(.text);
      boot.6102.o(.data);
   }
   _bootSegmentEnd = ADDR(.boot) + SIZEOF(.boot); _bootSegmentRomEnd = __romPos + SIZEOF(.boot); __romPos += SIZEOF(.boot);
   _codeSegmentStart = ADDR(.code); _codeSegmentRomStart = __romPos; .code 0x80000400 : AT(__romPos) SUBALIGN(16)
   {
      asm/entry.o(.text);
      codesegment.o(.text);
      /usr/lib/n64/PR/rspboot.o(.text);
      /usr/lib/n64/PR/gspF3DEX2.fifo.o(.text);
      /usr/lib/n64/PR/gspF3DEX2.xbus.o(.text);
      codesegment.o(.data*);
      /usr/lib/n64/PR/rspboot.o(.data*);
      /usr/lib/n64/PR/gspF3DEX2.fifo.o(.data*);
      /usr/lib/n64/PR/gspF3DEX2.xbus.o(.data*);
      codesegment.o(.rodata*);
   }
   _codeSegmentEnd = ADDR(.code) + SIZEOF(.code); _codeSegmentRomEnd = __romPos + SIZEOF(.code); __romPos += SIZEOF(.code);
   _codeSegmentBssStart = ADDR(.code.noload); .code.noload (NOLOAD) :
   {
      codesegment.o(COMMON);
      codesegment.o(.scommon*);
      codesegment.o(.bss*);
      . = ALIGN(0x8);
   }
   _codeSegmentBssEnd = ADDR(.code.noload) + SIZEOF(.code.noload); _codeSegmentBssSize = SIZEOF(.code.noload);
</pre>
    You may notice that the syntax seems VERY unfriendly. <br>
    But don't worry, 
</p>

<a href="index.html">Back home</a>
</body>
</html>